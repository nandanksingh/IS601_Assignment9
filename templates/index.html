<!-- ----------------------------------------------------------
 Author: Nandan Kumar
 Date: 11/03/2025
 Assignment-9: Working with Raw SQL in pgAdmin
 File: templates/index.html
 ----------------------------------------------------------
 Description:
 A clean and modern web interface for the FastAPI Calculator.
 It allows users to input two numbers, perform arithmetic
 operations, and display results returned from the FastAPI
 backend. This front end remains compatible with the new
 Docker Compose setup that connects FastAPI, PostgreSQL,
 and pgAdmin for database integration testing.
 ---------------------------------------------------------- -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>FastAPI Calculator</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #4facfe, #00f2fe);
      color: #222;
    }

    h1 {
      color: #ffffff;
      margin-bottom: 15px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    }

    .calculator {
      background-color: #ffffff;
      border-radius: 12px;
      padding: 25px 40px;
      box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.25);
      transition: transform 0.2s ease;
    }

    .calculator:hover {
      transform: scale(1.02);
    }

    input {
      margin: 8px;
      padding: 8px;
      width: 160px;
      text-align: center;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 15px;
      outline: none;
      transition: border 0.3s ease;
    }

    input:focus {
      border-color: #4facfe;
    }

    button {
      margin: 6px;
      padding: 8px 18px;
      font-size: 15px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      color: white;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    button#add { background-color: #2ecc71; }      /* Green */
    button#subtract { background-color: #f39c12; } /* Orange */
    button#multiply { background-color: #9b59b6; } /* Purple */
    button#divide { background-color: #e74c3c; }   /* Red */

    button:hover {
      opacity: 0.85;
      transform: scale(1.05);
    }

    #result {
      margin-top: 20px;
      font-weight: bold;
      color: #333333;
      font-size: 18px;
      background-color: #f1f1f1;
      padding: 10px;
      border-radius: 6px;
      box-shadow: inset 0 0 5px rgba(0,0,0,0.1);
    }
  </style>
</head>

<body>
  <h1>FastAPI Calculator</h1>

  <div class="calculator">
    <h2>Enter Numbers and Choose Operation</h2>

    <!-- Input Fields -->
    <input type="text" id="a" placeholder="Enter first number">
    <input type="text" id="b" placeholder="Enter second number"><br>

    <!-- Operation Buttons -->
    <button id="add" onclick="calculate('add')">Add</button>
    <button id="subtract" onclick="calculate('subtract')">Subtract</button>
    <button id="multiply" onclick="calculate('multiply')">Multiply</button>
    <button id="divide" onclick="calculate('divide')">Divide</button>

    <!-- Result Display -->
    <div id="result">Result will appear here</div>
  </div>

  <script>
    async function calculate(operation) {
      const a = document.getElementById('a').value.trim();
      const b = document.getElementById('b').value.trim();
      const resultBox = document.getElementById('result');

      // Handle missing input
      if (a === "" || b === "") {
        resultBox.innerText = "Error: Missing input values.";
        resultBox.style.color = "#e74c3c";
        return;
      }

      try {
        const response = await fetch('/' + operation, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ a: parseFloat(a), b: parseFloat(b) })
        });

        const data = await response.json();

        if (response.ok && data.result !== undefined) {
          resultBox.innerText = "Result: " + data.result;
          resultBox.style.color = "#2ecc71";
        } else {
          resultBox.innerText = "Error: " + (data.error || "Invalid input.");
          resultBox.style.color = "#e74c3c";
        }
      } catch (error) {
        resultBox.innerText = "Error: Unable to connect to server.";
        resultBox.style.color = "#e74c3c";
      }
    }
  </script>
</body>
</html>
